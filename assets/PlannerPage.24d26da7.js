import{u as le,c as se,e as we,f as Te,w as ae,i as qe,Q as oe}from"./uid.4a27f0b7.js";import{Q as Ie}from"./QPage.a33876ab.js";import{c as A,b as re,n as Ce,i as ue,Q as Y,R as de,g as U}from"./QBtn.1e42a5f4.js";import{U as ce,u as De}from"./UserRepository.24346288.js";import{c as k,r as C,w as E,o as K,h as f,T as W,g as ge,ai as Le,k as F,aj as me,R as $e,x as _,y as L,z as x,A as S,C as J,D as O,I as T,F as P,H as X,G as Z,B as fe,L as N,Y as M,t as Be}from"./index.ddcf8c37.js";import{b as ee,a as ne,Q as j,c as Ne}from"./QList.e9e15938.js";import{I as ve}from"./iconComponent.5ec1628f.js";import{_ as je}from"./SimplePopupComponent.16a22eb5.js";const Qe={ratio:[String,Number]};function Oe(e,v){return k(()=>{const m=Number(e.ratio||(v!==void 0?v.value:void 0));return isNaN(m)!==!0&&m>0?{paddingBottom:`${100/m}%`}:null})}const ze=16/9;var Pe=A({name:"QImg",props:{...Qe,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:ze},placeholderSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:v,emit:m}){const o=C(e.initialRatio),h=Oe(e,o);let l;const t=[C(null),C(n())],r=C(0),i=C(!1),g=C(!1),a=k(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),d=k(()=>({width:e.width,height:e.height})),u=k(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition`),b=k(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));E(()=>q(),y);function q(){return e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null}function n(){return e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null}function y(c){clearTimeout(l),g.value=!1,c===null?(i.value=!1,t[r.value^1].value=n()):i.value=!0,t[r.value].value=c}function I({target:c}){l!==null&&(clearTimeout(l),o.value=c.naturalHeight===0?.5:c.naturalWidth/c.naturalHeight,w(c,1))}function w(c,$){l===null||$===1e3||(c.complete===!0?p(c):l=setTimeout(()=>{w(c,$+1)},50))}function p(c){l!==null&&(r.value=r.value^1,t[r.value].value=null,i.value=!1,g.value=!1,m("load",c.currentSrc||c.src))}function H(c){clearTimeout(l),i.value=!1,g.value=!0,t[r.value].value=null,t[r.value^1].value=n(),m("error",c)}function z(c){const $=t[c].value,Q={key:"img_"+c,class:u.value,style:b.value,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...$};return r.value===c?(Q.class+=" q-img__image--waiting",Object.assign(Q,{onLoad:I,onError:H})):Q.class+=" q-img__image--loaded",f("div",{class:"q-img__container absolute-full",key:"img"+c},f("img",Q))}function V(){return i.value!==!0?f("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},re(v[g.value===!0?"error":"default"])):f("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},v.loading!==void 0?v.loading():e.noSpinner===!0?void 0:[f(Ce,{color:e.spinnerColor,size:e.spinnerSize})])}return y(q()),K(()=>{clearTimeout(l),l=null}),()=>{const c=[];return h.value!==null&&c.push(f("div",{key:"filler",style:h.value})),g.value!==!0&&(t[0].value!==null&&c.push(z(0)),t[1].value!==null&&c.push(z(1))),c.push(f(W,{name:"q-transition--fade"},V)),f("div",{class:a.value,style:d.value,role:"img","aria-label":e.alt},c)}}}),Re=A({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:v,emit:m}){let o=!1,h,l,t,r,i,g;function a(){h&&h(),h=null,o=!1,clearTimeout(t),clearTimeout(r),l!==void 0&&l.removeEventListener("transitionend",i),i=null}function d(n,y,I){n.style.overflowY="hidden",y!==void 0&&(n.style.height=`${y}px`),n.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,o=!0,h=I}function u(n,y){n.style.overflowY=null,n.style.height=null,n.style.transition=null,a(),y!==g&&m(y)}function b(n,y){let I=0;l=n,o===!0?(a(),I=n.offsetHeight===n.scrollHeight?0:void 0):g="hide",d(n,I,y),t=setTimeout(()=>{n.style.height=`${n.scrollHeight}px`,i=w=>{(Object(w)!==w||w.target===n)&&u(n,"show")},n.addEventListener("transitionend",i),r=setTimeout(i,e.duration*1.1)},100)}function q(n,y){let I;l=n,o===!0?a():(g="show",I=n.scrollHeight),d(n,I,y),t=setTimeout(()=>{n.style.height=0,i=w=>{(Object(w)!==w||w.target===n)&&u(n,"hide")},n.addEventListener("transitionend",i),r=setTimeout(i,e.duration*1.1)},100)}return K(()=>{o===!0&&a()}),()=>f(W,{css:!1,appear:e.appear,onEnter:b,onLeave:q},v.default)}});const Ee={true:"inset",item:"item-inset","item-thumbnail":"item-thumbnail-inset"},G={xs:2,sm:4,md:8,lg:16,xl:24};var ie=A({name:"QSeparator",props:{...le,spaced:[Boolean,String],inset:[Boolean,String],vertical:Boolean,color:String,size:String},setup(e){const v=ge(),m=se(e,v.proxy.$q),o=k(()=>e.vertical===!0?"vertical":"horizontal"),h=k(()=>` q-separator--${o.value}`),l=k(()=>e.inset!==!1?`${h.value}-${Ee[e.inset]}`:""),t=k(()=>`q-separator${h.value}${l.value}`+(e.color!==void 0?` bg-${e.color}`:"")+(m.value===!0?" q-separator--dark":"")),r=k(()=>{const i={};if(e.size!==void 0&&(i[e.vertical===!0?"width":"height"]=e.size),e.spaced!==!1){const g=e.spaced===!0?`${G.md}px`:e.spaced in G?`${G[e.spaced]}px`:e.spaced,a=e.vertical===!0?["Left","Right"]:["Top","Bottom"];i[`margin${a[0]}`]=i[`margin${a[1]}`]=g}return i});return()=>f("hr",{class:t.value,style:r.value,"aria-orientation":o.value})}});const B=Le({}),Ae=Object.keys(ue);var Fe=A({name:"QExpansionItem",props:{...ue,...we,...le,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:Number,headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...Te,"click","afterShow","afterHide"],setup(e,{slots:v,emit:m}){const{proxy:{$q:o}}=ge(),h=se(e,o),l=C(e.modelValue!==null?e.modelValue:e.defaultOpened),t=C(null),r=ae(),{show:i,hide:g,toggle:a}=qe({showing:l});let d,u;const b=k(()=>`q-expansion-item q-item-type q-expansion-item--${l.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),q=k(()=>{if(e.contentInsetLevel===void 0)return null;const s=o.lang.rtl===!0?"Right":"Left";return{["padding"+s]:e.contentInsetLevel*56+"px"}}),n=k(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),y=k(()=>{const s={};return Ae.forEach(D=>{s[D]=e[D]}),s}),I=k(()=>n.value===!0||e.expandIconToggle!==!0),w=k(()=>e.expandedIcon!==void 0&&l.value===!0?e.expandedIcon:e.expandIcon||o.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),p=k(()=>e.disable!==!0&&(n.value===!0||e.expandIconToggle===!0)),H=k(()=>({expanded:l.value===!0,detailsId:e.targetUid,toggle:a,show:i,hide:g})),z=k(()=>{const s=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:o.lang.label[l.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":l.value===!0?"true":"false","aria-controls":r,"aria-label":s}});E(()=>e.group,s=>{u!==void 0&&u(),s!==void 0&&te()});function V(s){n.value!==!0&&a(s),m("click",s)}function c(s){s.keyCode===13&&$(s,!0)}function $(s,D){D!==!0&&t.value!==null&&t.value.focus(),a(s),$e(s)}function Q(){m("afterShow")}function he(){m("afterHide")}function te(){d===void 0&&(d=ae()),l.value===!0&&(B[e.group]=d);const s=E(l,R=>{R===!0?B[e.group]=d:B[e.group]===d&&delete B[e.group]}),D=E(()=>B[e.group],(R,_e)=>{_e===d&&R!==void 0&&R!==d&&g()});u=()=>{s(),D(),B[e.group]===d&&delete B[e.group],u=void 0}}function be(){const s={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},D=[f(Y,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&l.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:w.value})];return p.value===!0&&(Object.assign(s,{tabindex:0,...z.value,onClick:$,onKeyup:c}),D.unshift(f("div",{ref:t,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),f(j,s,()=>D)}function ke(){let s;return v.header!==void 0?s=[].concat(v.header(H.value)):(s=[f(j,()=>[f(ne,{lines:e.labelLines},()=>e.label||""),e.caption?f(ne,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&s[e.switchToggleSide===!0?"push":"unshift"](f(j,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>f(Y,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&s[e.switchToggleSide===!0?"unshift":"push"](be()),s}function ye(){const s={ref:"item",style:e.headerStyle,class:e.headerClass,dark:h.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return I.value===!0&&(s.clickable=!0,s.onClick=V,Object.assign(s,n.value===!0?y.value:z.value)),f(ee,s,ke)}function Se(){return F(f("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:q.value,id:r},re(v.default)),[[me,l.value]])}function xe(){const s=[ye(),f(Re,{duration:e.duration,onShow:Q,onHide:he},Se)];return e.expandSeparator===!0&&s.push(f(ie,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:h.value}),f(ie,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:h.value})),s}return e.group!==void 0&&te(),K(()=>{u!==void 0&&u()}),()=>f("div",{class:b.value},[f("div",{class:"q-expansion-item__container relative-position"},xe())])}}),pe="/assets/seperator.c4547193.png";const He={__name:"subtaskListItem",props:{subtask:{type:Object,required:!0},clickAction:{type:Function,default:()=>{}}},setup(e){return(v,m)=>F((_(),L(ee,{clickable:"",onClick:m[0]||(m[0]=()=>{var o;return v.$router.push("timer/"+((o=v.task)==null?void 0:o.id))})},{default:x(()=>[S(j,null,{default:x(()=>[J(O(e.subtask.name),1)]),_:1}),S(j,{side:"",top:""},{default:x(()=>{var o,h;return[T("div",null,[(_(!0),P(X,null,Z((h=(o=e.subtask)==null?void 0:o.pommesNeeded)!=null?h:0,l=>{var t;return _(),L(ve,{key:l,size:((t=e.subtask)==null?void 0:t.pommesNeeded)>5?"sm":"md"},null,8,["size"])}),128))])]}),_:1})]),_:1})),[[de]])}},Ve={__name:"subtaskList",props:{subtasks:{type:Array,required:!0}},setup(e){return(v,m)=>(_(),L(Ne,{bordered:"",separator:"",dense:"",padding:""},{default:x(()=>[(_(!0),P(X,null,Z(e.subtasks,(o,h)=>(_(),L(He,{key:h,subtask:o},null,8,["subtask"]))),128)),e.subtasks.length?fe("",!0):(_(),L(ee,{key:0,disable:""},{default:x(()=>[J(" - Empty - ")]),_:1}))]),_:1}))}};const Ue={style:{"max-width":"500px"}},Me={key:0,class:"text-center"},Ge={class:"flex row"},Ye={class:"q-pa-md col-10",style:{"max-width":"600px"}},Ke={class:"q-pt-md text-weight-light text-caption"},We={class:"text-h6"},Je={class:"q-pb-md"},Xe={class:"column justify-center col-1"},Ze={class:"column justify-center col-1"},et={class:"q-ma-md"},tt={__name:"PlannerTask",props:{task:{type:Object,required:!0}},setup(e){const v=e;let m=C(!1),o=C(!1),h=function(l,t){return t>0?"Pommes Needed per day: "+(l/t).toFixed(1):t===0?"":"Past Due"};return(l,t)=>{var r,i,g,a,d;return _(),P("div",Ue,[(r=e.task)!=null&&r.separate?(_(),P("div",Me,[S(Y,{size:"xl"},{default:x(()=>[S(Pe,{src:pe})]),_:1})])):fe("",!0),T("div",Ge,[T("div",Ye,[S(Fe,{dark:(i=e.task)==null?void 0:i.isDark,modelValue:N(m),"onUpdate:modelValue":t[0]||(t[0]=u=>M(m)?m.value=u:m=u),class:"shadow-1 overflow-hidden",style:{"border-radius":"30px"},icon:"explore","header-style":"background-color:"+((a=(g=e.task)==null?void 0:g.hex)!=null?a:"#FFF")+"; color:"+((d=e.task)!=null&&d.isDark?"#FFF":"#000")+";","expand-icon-class":"text-white"},{header:x(()=>[S(j,null,{default:x(()=>{var u,b,q;return[T("div",Ke,O((u=e.task)==null?void 0:u.dateText),1),T("div",We,O(e.task.name),1),T("div",Je,O(N(h)((b=e.task)==null?void 0:b.pommesNeeded,(q=e.task)==null?void 0:q.relativeDays)),1)]}),_:1}),S(j,{side:"",class:"text-h5"},{default:x(()=>{var u;return[T("div",null,[J(O((u=e.task)==null?void 0:u.pommesNeeded)+" ",1),S(ve)])]}),_:1})]),default:x(()=>[S(oe,null,{default:x(()=>{var u,b;return[S(Ve,{subtasks:Object.values((b=(u=e.task)==null?void 0:u.subtasks)!=null?b:{})},null,8,["subtasks"])]}),_:1})]),_:1},8,["dark","modelValue","header-style"])]),S(W,{name:"fade"},{default:x(()=>[F(T("div",Xe,[S(U,{class:"q-my-sm","fab-mini":"",color:"negative",icon:"delete",onClick:t[1]||(t[1]=()=>M(o)?o.value=!0:o=!0)}),S(U,{class:"q-my-sm","fab-mini":"","text-color":"white",color:"primary",icon:"edit",onClick:t[2]||(t[2]=u=>{var b;return l.$router.push("edit-task/"+((b=e.task)==null?void 0:b.id))})})],512),[[me,N(m)]])]),_:1}),T("div",Ze,[S(U,{class:"q-my-sm","fab-mini":"","text-color":"white",color:"green",icon:"play_arrow",onClick:t[3]||(t[3]=u=>{var b;return l.$router.push("timer/"+((b=e.task)==null?void 0:b.id))})})]),S(je,{modelValue:N(o),"onUpdate:modelValue":t[4]||(t[4]=u=>M(o)?o.value=u:o=u),"button-action":()=>N(ce).deleteFieldInUserData("tasks."+N(v).task.id),"button-title":"Delete",title:"Delete Task?"},{default:x(()=>{var u;return[T("text",et,' Are you sure you want to delete the task "'+O((u=e.task)==null?void 0:u.name)+'"? ',1)]}),_:1},8,["modelValue","button-action"])])])}}},at={class:""},ct={__name:"PlannerPage",setup(e){let v=Be({}),m=()=>{},o=function(){m(),m=ce.onUserDataSnapshot(t=>{var r,i;Object.assign(v,(i=(r=t.data())==null?void 0:r.tasks)!=null?i:{})})};o(),De.onUpdate(o);function h(t){const r=Math.ceil((new Date(t)-Date.now())/864e5);let i=Math.abs(r),g,a="";const d=Math.sign(r)===-1;if(i>6)a=(d?"":"in ")+i+" days"+(d?" ago":""),g=1;else if(i>1)g=0,a=(d?"Last ":"")+new Date(t).toLocaleDateString("en-US",{weekday:"long"});else switch(g=0,r){case-0:case 0:a="Today";break;case 1:a="Tomorrow";break;case-1:a="Yesterday";break}return d&&(g=-1),a="Due "+a,{text:a,depth:g,relativeDays:r}}let l=k(()=>{var i,g;let t=(i=Object.values(v))!=null?i:[];t.forEach(a=>{var b;let d=h(a.dueDate);a.dateText=d.text,a.dateDepth=d.depth,a.relativeDays=d.relativeDays;let u=(b=Object.values(a==null?void 0:a.subtasks))!=null?b:[];a.pommesNeeded=u.reduce((q,n)=>{var y;return q+((y=n==null?void 0:n.pommesNeeded)!=null?y:0)},0)}),t.sort((a,d)=>a.relativeDays-d.relativeDays).sort((a,d)=>a.dateDepth-d.dateDepth);let r=(g=t==null?void 0:t[0])==null?void 0:g.dateDepth;for(const a of t)r!==a.dateDepth&&a.dateDepth===1&&(a.separate=!0,r=a.dateDepth);return t});return(t,r)=>(_(),L(Ie,{padding:""},{default:x(()=>[T("div",at,[(_(!0),P(X,null,Z(N(l),(i,g)=>(_(),L(tt,{key:g,task:i},null,8,["task"]))),128)),F((_(),L(oe,{class:"q-ma-md flex flex-center text-center bg-primary cursor-pointer q-hoverable",style:{width:"425px",height:"40px","border-radius":"30px"}},{default:x(()=>[T("span",{class:"col text-weight-bold text-h6 text-white",onClick:r[0]||(r[0]=i=>t.$router.push("new-task"))}," Add Task ")]),_:1})),[[de]])])]),_:1}))}};export{ct as default};
