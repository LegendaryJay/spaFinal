import{c as We,b as Qe,Q as ze,a as Ne}from"./QList.e9e15938.js";import{c as ve,b as ge,m as Oe,x as be,Q as Re,g as L,y as Fe}from"./QBtn.1e42a5f4.js";import{Q as Ue,u as $e}from"./timer.ac91678f.js";import{r as H,M as je,S as ae,m as Ie,N as ie,w as C,a as xe,o as G,g as Y,O as _e,b as j,V as Ke,c as g,Q as Ge,h as p,T as Ye,R as Xe,P as Je,x as B,y as E,z as k,I,D as A,L as S,A as w,Y as W,F as _,H as ye,G as we,ak as Ze,af as et,t as tt,C as re,k as nt}from"./index.ddcf8c37.js";import{d as ot}from"./use-form.9aac7bdd.js";import{y as ue,j as lt,e as at,u as it,l as pe,f as rt,c as ut,m as st,h as ct,n as dt,i as ft,o as mt,t as ht,r as vt,q as se,g as gt,v as bt,p as xt,z as yt,w as wt,Q as pt,C as kt}from"./uid.4a27f0b7.js";import{Q as St}from"./QPage.a33876ab.js";import{Q as Ct}from"./QSlider.7964a158.js";import{u as Bt,U}from"./UserRepository.24346288.js";import"./format.e3cb4f10.js";const qt={target:{default:!0},noParentEvent:Boolean,contextMenu:Boolean};function Tt({showing:e,avoidEmit:n,configureAnchorEl:i}){const{props:t,proxy:l,emit:u}=Y(),a=H(null);let f;function s(o){return a.value===null?!1:o===void 0||o.touches===void 0||o.touches.length<=1}const r={};i===void 0&&(Object.assign(r,{hide(o){l.hide(o)},toggle(o){l.toggle(o),o.qAnchorHandled=!0},toggleKey(o){je(o,13)===!0&&r.toggle(o)},contextClick(o){l.hide(o),ae(o),Ie(()=>{l.show(o),o.qAnchorHandled=!0})},prevent:ae,mobileTouch(o){if(r.mobileCleanup(o),s(o)!==!0)return;l.hide(o),a.value.classList.add("non-selectable");const d=o.target;ie(r,"anchor",[[d,"touchmove","mobileCleanup","passive"],[d,"touchend","mobileCleanup","passive"],[d,"touchcancel","mobileCleanup","passive"],[a.value,"contextmenu","prevent","notPassive"]]),f=setTimeout(()=>{l.show(o),o.qAnchorHandled=!0},300)},mobileCleanup(o){a.value.classList.remove("non-selectable"),clearTimeout(f),e.value===!0&&o!==void 0&&ot()}}),i=function(o=t.contextMenu){if(t.noParentEvent===!0||a.value===null)return;let d;o===!0?l.$q.platform.is.mobile===!0?d=[[a.value,"touchstart","mobileTouch","passive"]]:d=[[a.value,"mousedown","hide","passive"],[a.value,"contextmenu","contextClick","notPassive"]]:d=[[a.value,"click","toggle","passive"],[a.value,"keyup","toggleKey","passive"]],ie(r,"anchor",d)});function m(){_e(r,"anchor")}function b(o){for(a.value=o;a.value.classList.contains("q-anchor--skip");)a.value=a.value.parentNode;i()}function x(){if(t.target===!1||t.target===""||l.$el.parentNode===null)a.value=null;else if(t.target===!0)b(l.$el.parentNode);else{let o=t.target;if(typeof t.target=="string")try{o=document.querySelector(t.target)}catch{o=void 0}o!=null?(a.value=o.$el||o,i()):(a.value=null,console.error(`Anchor: target "${t.target}" not found`))}}return C(()=>t.contextMenu,o=>{a.value!==null&&(m(),i(o))}),C(()=>t.target,()=>{a.value!==null&&m(),x()}),C(()=>t.noParentEvent,o=>{a.value!==null&&(o===!0?m():i())}),xe(()=>{x(),n!==!0&&t.modelValue===!0&&a.value===null&&u("update:modelValue",!1)}),G(()=>{clearTimeout(f),m()}),{anchorEl:a,canShow:s,anchorEvents:r}}function Ht(e,n){const i=H(null);let t;function l(f,s){const r=`${s!==void 0?"add":"remove"}EventListener`,m=s!==void 0?s:t;f!==window&&f[r]("scroll",m,j.passive),window[r]("scroll",m,j.passive),t=s}function u(){i.value!==null&&(l(i.value),i.value=null)}const a=C(()=>e.noParentEvent,()=>{i.value!==null&&(u(),n())});return G(a),{localScrollTarget:i,unconfigureScrollTarget:u,changeScrollEvent:l}}let ke;const{notPassiveCapture:Q}=j,q=[];function z(e){clearTimeout(ke);const n=e.target;if(n===void 0||n.nodeType===8||n.classList.contains("no-pointer-events")===!0)return;let i=ue.length-1;for(;i>=0;){const t=ue[i].$;if(t.type.name!=="QDialog")break;if(t.props.seamless!==!0)return;i--}for(let t=q.length-1;t>=0;t--){const l=q[t];if((l.anchorEl.value===null||l.anchorEl.value.contains(n)===!1)&&(n===document.body||l.innerRef.value!==null&&l.innerRef.value.contains(n)===!1))e.qClickOutside=!0,l.onClickOutside(e);else return}}function Mt(e){q.push(e),q.length===1&&(document.addEventListener("mousedown",z,Q),document.addEventListener("touchstart",z,Q))}function ce(e){const n=q.findIndex(i=>i===e);n>-1&&(q.splice(n,1),q.length===0&&(clearTimeout(ke),document.removeEventListener("mousedown",z,Q),document.removeEventListener("touchstart",z,Q)))}let de,fe;function me(e){const n=e.split(" ");return n.length!==2?!1:["top","center","bottom"].includes(n[0])!==!0?(console.error("Anchor/Self position must start with one of top/center/bottom"),!1):["left","middle","right","start","end"].includes(n[1])!==!0?(console.error("Anchor/Self position must end with one of left/middle/right/start/end"),!1):!0}function Pt(e){return e?!(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"):!0}const K={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(e=>{K[`${e}#ltr`]=e,K[`${e}#rtl`]=e});function he(e,n){const i=e.split(" ");return{vertical:i[0],horizontal:K[`${i[1]}#${n===!0?"rtl":"ltr"}`]}}function Vt(e,n){let{top:i,left:t,right:l,bottom:u,width:a,height:f}=e.getBoundingClientRect();return n!==void 0&&(i-=n[1],t-=n[0],u+=n[1],l+=n[0],a+=n[0],f+=n[1]),{top:i,left:t,right:l,bottom:u,width:a,height:f,middle:t+(l-t)/2,center:i+(u-i)/2}}function Dt(e){return{top:0,center:e.offsetHeight/2,bottom:e.offsetHeight,left:0,middle:e.offsetWidth/2,right:e.offsetWidth}}function Lt(e){if(Ke.is.ios===!0&&window.visualViewport!==void 0){const f=document.body.style,{offsetLeft:s,offsetTop:r}=window.visualViewport;s!==de&&(f.setProperty("--q-pe-left",s+"px"),de=s),r!==fe&&(f.setProperty("--q-pe-top",r+"px"),fe=r)}let n;const{scrollLeft:i,scrollTop:t}=e.el;if(e.absoluteOffset===void 0)n=Vt(e.anchorEl,e.cover===!0?[0,0]:e.offset);else{const{top:f,left:s}=e.anchorEl.getBoundingClientRect(),r=f+e.absoluteOffset.top,m=s+e.absoluteOffset.left;n={top:r,left:m,width:1,height:1,right:m+1,center:r,middle:m,bottom:r+1}}let l={maxHeight:e.maxHeight,maxWidth:e.maxWidth,visibility:"visible"};(e.fit===!0||e.cover===!0)&&(l.minWidth=n.width+"px",e.cover===!0&&(l.minHeight=n.height+"px")),Object.assign(e.el.style,l);const u=Dt(e.el),a={top:n[e.anchorOrigin.vertical]-u[e.selfOrigin.vertical],left:n[e.anchorOrigin.horizontal]-u[e.selfOrigin.horizontal]};Et(a,n,u,e.anchorOrigin,e.selfOrigin),l={top:a.top+"px",left:a.left+"px"},a.maxHeight!==void 0&&(l.maxHeight=a.maxHeight+"px",n.height>a.maxHeight&&(l.minHeight=l.maxHeight)),a.maxWidth!==void 0&&(l.maxWidth=a.maxWidth+"px",n.width>a.maxWidth&&(l.minWidth=l.maxWidth)),Object.assign(e.el.style,l),e.el.scrollTop!==t&&(e.el.scrollTop=t),e.el.scrollLeft!==i&&(e.el.scrollLeft=i)}function Et(e,n,i,t,l){const u=i.bottom,a=i.right,f=lt(),s=window.innerHeight-f,r=document.body.clientWidth;if(e.top<0||e.top+u>s)if(l.vertical==="center")e.top=n[t.vertical]>s/2?Math.max(0,s-u):0,e.maxHeight=Math.min(u,s);else if(n[t.vertical]>s/2){const m=Math.min(s,t.vertical==="center"?n.center:t.vertical===l.vertical?n.bottom:n.top);e.maxHeight=Math.min(u,m),e.top=Math.max(0,m-u)}else e.top=Math.max(0,t.vertical==="center"?n.center:t.vertical===l.vertical?n.top:n.bottom),e.maxHeight=Math.min(u,s-e.top);if(e.left<0||e.left+a>r)if(e.maxWidth=Math.min(a,r),l.horizontal==="middle")e.left=n[t.horizontal]>r/2?Math.max(0,r-a):0;else if(n[t.horizontal]>r/2){const m=Math.min(r,t.horizontal==="middle"?n.middle:t.horizontal===l.horizontal?n.right:n.left);e.maxWidth=Math.min(a,m),e.left=Math.max(0,m-e.maxWidth)}else e.left=Math.max(0,t.horizontal==="middle"?n.middle:t.horizontal===l.horizontal?n.left:n.right),e.maxWidth=Math.min(a,r-e.left)}var At=ve({name:"QMenu",inheritAttrs:!1,props:{...qt,...at,...it,...pe,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:me},self:{type:String,validator:me},offset:{type:Array,validator:Pt},scrollTarget:{default:void 0},touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...rt,"click","escapeKey"],setup(e,{slots:n,emit:i,attrs:t}){let l=null,u,a,f;const s=Y(),{proxy:r}=s,{$q:m}=r,b=H(null),x=H(!1),o=g(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),d=ut(e,m),{registerTick:v,removeTick:y}=st(),{registerTimeout:V}=ct(),{transitionProps:D,transitionStyle:M}=dt(e),{localScrollTarget:h,changeScrollEvent:Se,unconfigureScrollTarget:Ce}=Ht(e,oe),{anchorEl:T,canShow:Be}=Tt({showing:x}),{hide:X}=ft({showing:x,canShow:Be,handleShow:Pe,handleHide:Ve,hideOnRouteChange:o,processOnMount:!0}),{showPortal:J,hidePortal:Z,renderPortal:qe}=mt(s,b,Le),N={anchorEl:T,innerRef:b,onClickOutside(c){if(e.persistent!==!0&&x.value===!0)return X(c),(c.type==="touchstart"||c.target.classList.contains("q-dialog__backdrop"))&&Xe(c),!0}},ee=g(()=>he(e.anchor||(e.cover===!0?"center middle":"bottom start"),m.lang.rtl)),Te=g(()=>e.cover===!0?ee.value:he(e.self||"top start",m.lang.rtl)),He=g(()=>(e.square===!0?" q-menu--square":"")+(d.value===!0?" q-menu--dark q-dark":"")),Me=g(()=>e.autoClose===!0?{onClick:De}:{}),te=g(()=>x.value===!0&&e.persistent!==!0);C(te,c=>{c===!0?(bt(R),Mt(N)):(se(R),ce(N))});function O(){xt(()=>{let c=b.value;c&&c.contains(document.activeElement)!==!0&&(c=c.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||c.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||c.querySelector("[autofocus], [data-autofocus]")||c,c.focus({preventScroll:!0}))})}function Pe(c){if(l=e.noRefocus===!1?document.activeElement:null,ht(le),J(),oe(),u=void 0,c!==void 0&&(e.touchPosition||e.contextMenu)){const F=Ge(c);if(F.left!==void 0){const{top:Ee,left:Ae}=T.value.getBoundingClientRect();u={left:F.left-Ae,top:F.top-Ee}}}a===void 0&&(a=C(()=>m.screen.width+"|"+m.screen.height+"|"+e.self+"|"+e.anchor+"|"+m.lang.rtl,P)),e.noFocus!==!0&&document.activeElement.blur(),v(()=>{P(),e.noFocus!==!0&&O()}),V(()=>{m.platform.is.ios===!0&&(f=e.autoClose,b.value.click()),P(),J(!0),i("show",c)},e.transitionDuration)}function Ve(c){y(),Z(),ne(!0),l!==null&&(c===void 0||c.qClickOutside!==!0)&&(((c&&c.type.indexOf("key")===0?l.closest('[tabindex]:not([tabindex^="-"])'):void 0)||l).focus(),l=null),V(()=>{Z(!0),i("hide",c)},e.transitionDuration)}function ne(c){u=void 0,a!==void 0&&(a(),a=void 0),(c===!0||x.value===!0)&&(vt(le),Ce(),ce(N),se(R)),c!==!0&&(l=null)}function oe(){(T.value!==null||e.scrollTarget!==void 0)&&(h.value=gt(T.value,e.scrollTarget),Se(h.value,P))}function De(c){f!==!0?(yt(r,c),i("click",c)):f=!1}function le(c){te.value===!0&&e.noFocus!==!0&&Oe(b.value,c.target)!==!0&&O()}function R(c){i("escapeKey"),X(c)}function P(){const c=b.value;c===null||T.value===null||Lt({el:c,offset:e.offset,anchorEl:T.value,anchorOrigin:ee.value,selfOrigin:Te.value,absoluteOffset:u,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function Le(){return p(Ye,D.value,()=>x.value===!0?p("div",{role:"menu",...t,ref:b,tabindex:-1,class:["q-menu q-position-engine scroll"+He.value,t.class],style:[t.style,M.value],...Me.value},ge(n.default)):null)}return G(ne),Object.assign(r,{focus:O,updatePosition:P}),qe}});const Wt=Object.keys(be),Qt=e=>Wt.reduce((n,i)=>{const t=e[i];return t!==void 0&&(n[i]=t),n},{});var zt=ve({name:"QBtnDropdown",props:{...be,...pe,modelValue:Boolean,split:Boolean,dropdownIcon:String,contentClass:[Array,String,Object],contentStyle:[Array,String,Object],cover:Boolean,persistent:Boolean,noRouteDismiss:Boolean,autoClose:Boolean,menuAnchor:{type:String,default:"bottom end"},menuSelf:{type:String,default:"top end"},menuOffset:Array,disableMainBtn:Boolean,disableDropdown:Boolean,noIconAnimation:Boolean,toggleAriaLabel:String},emits:["update:modelValue","click","beforeShow","show","beforeHide","hide"],setup(e,{slots:n,emit:i}){const{proxy:t}=Y(),l=H(e.modelValue),u=H(null),a=wt(),f=g(()=>{const h={"aria-expanded":l.value===!0?"true":"false","aria-haspopup":"true","aria-controls":a,"aria-label":e.toggleAriaLabel||t.$q.lang.label[l.value===!0?"collapse":"expand"](e.label)};return(e.disable===!0||e.split===!1&&e.disableMainBtn===!0||e.disableDropdown===!0)&&(h["aria-disabled"]="true"),h}),s=g(()=>"q-btn-dropdown__arrow"+(l.value===!0&&e.noIconAnimation===!1?" rotate-180":"")+(e.split===!1?" q-btn-dropdown__arrow-container":"")),r=g(()=>Fe(e)),m=g(()=>Qt(e));C(()=>e.modelValue,h=>{u.value!==null&&u.value[h?"show":"hide"]()}),C(()=>e.split,M);function b(h){l.value=!0,i("beforeShow",h)}function x(h){i("show",h),i("update:modelValue",!0)}function o(h){l.value=!1,i("beforeHide",h)}function d(h){i("hide",h),i("update:modelValue",!1)}function v(h){i("click",h)}function y(h){Je(h),M(),i("click",h)}function V(h){u.value!==null&&u.value.toggle(h)}function D(h){u.value!==null&&u.value.show(h)}function M(h){u.value!==null&&u.value.hide(h)}return Object.assign(t,{show:D,hide:M,toggle:V}),xe(()=>{e.modelValue===!0&&D()}),()=>{const h=[p(Re,{class:s.value,name:e.dropdownIcon||t.$q.iconSet.arrow.dropdown})];return e.disableDropdown!==!0&&h.push(p(At,{ref:u,id:a,class:e.contentClass,style:e.contentStyle,cover:e.cover,fit:!0,persistent:e.persistent,noRouteDismiss:e.noRouteDismiss,autoClose:e.autoClose,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,separateClosePopup:!0,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:b,onShow:x,onBeforeHide:o,onHide:d},n.default)),e.split===!1?p(L,{class:"q-btn-dropdown q-btn-dropdown--simple",...m.value,...f.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:v},{default:()=>ge(n.label,[]).concat(h),loading:n.loading}):p(Ue,{class:"q-btn-dropdown q-btn-dropdown--split no-wrap q-btn-item",rounded:e.rounded,square:e.square,...r.value,glossy:e.glossy,stretch:e.stretch},()=>[p(L,{class:"q-btn-dropdown--current",...m.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:y},{default:n.label,loading:n.loading}),p(L,{class:"q-btn-dropdown__arrow-container q-anchor--skip",...f.value,...r.value,disable:e.disable===!0||e.disableDropdown===!0,rounded:e.rounded,color:e.color,textColor:e.textColor,dense:e.dense,size:e.size,padding:e.padding,ripple:e.ripple},()=>h)])}}});const Nt={class:"text-weight-bold"},Ot=["onClick"],$={__name:"TimeSlider",props:{modelValue:{type:Number,required:!0},title:{type:String,required:!0},markerSteps:{type:Number,default:15},maxMinutes:{type:Number,default:120},color:{type:String,default:"orange"}},emits:["update:modelValue"],setup(e,{emit:n}){const i=e;let t=g({get(){return i.modelValue},set(u){n("update:modelValue",u)}});function l(u){let a=Math.floor(u/60),f=u%60,s=f?f+" min":"",r=a?a+"hrs ":"";return(r!=null?r:"")+(s!=null?s:"")}return(u,a)=>(B(),E(pt,{class:"q-my-md q-px-xl q-px-xl"},{default:k(()=>[I("div",Nt,A(e.title),1),I("div",null,A(l(S(t))),1),w(Ct,{modelValue:S(t),"onUpdate:modelValue":a[0]||(a[0]=f=>W(t)?t.value=f:t=f),color:e.color,markers:e.markerSteps,snap:"",min:1,max:e.maxMinutes,"track-size":"10px","marker-labels":""},{"marker-label-group":k(({markerList:f})=>[(B(!0),_(ye,null,we(Math.floor(e.maxMinutes/e.markerSteps),s=>(B(),_("div",{key:s,class:Ze(["cursor-pointer",f[s].classes]),style:et(f[s].style),onClick:r=>S(t).value=s*e.markerSteps},A(l(s*e.markerSteps)),15,Ot))),128))]),_:1},8,["modelValue","color","markers","max"])]),_:1}))}};function Rt(e){var n,i;return{preset:(n=e==null?void 0:e.preset)!=null?n:null,presetName:(i=e==null?void 0:e.presetName)!=null?i:null}}const Ft={class:"q-my-md"},Zt={__name:"OptionsPage",setup(e){const n=$e();let i=Object.entries(n.presets),t=tt({});const l=new Rt;l.presetName=i[0][0],l.preset=i[0][1],console.log(l);function u(o){return o.charAt(0).toUpperCase()+o.slice(1)}let a=()=>{};Bt.onUpdate(o=>{a(),o?a=U.onUserDataSnapshot(d=>{var y;let v=d==null?void 0:d.data();Object.assign(t,(y=v==null?void 0:v.options)!=null?y:null),!t||!(t!=null&&t.preset)&&!t.presetName?(console.log("Options missing"),U.updateCurrentUserData("options",{...l})):console.log(t)}):Object.assign(t,{...l})});function f(o,d){t.presetName=o,t.preset=d}let s=g({get(){var o,d;return(d=(o=t==null?void 0:t.preset)==null?void 0:o[0])!=null?d:0},set(o){t.presetName="custom",t.preset[0]=o}}),r=g({get(){var o,d;return(d=(o=t==null?void 0:t.preset)==null?void 0:o[1])!=null?d:0},set(o){t.presetName="custom",t.preset[1]=o}}),m=g({get(){var o,d;return(d=(o=t==null?void 0:t.preset)==null?void 0:o[2])!=null?d:0},set(o){t.presetName="custom",t.preset[2]=o}}),b=g(()=>{var o;return(o=t==null?void 0:t.presetName)!=null?o:"custom"});function x(){U.updateCurrentUserData("options",t)}return(o,d)=>(B(),E(St,{padding:""},{default:k(()=>[w($,{modelValue:S(s),"onUpdate:modelValue":d[0]||(d[0]=v=>W(s)?s.value=v:s=v),title:"Pomme Length:"},null,8,["modelValue"]),w($,{modelValue:S(r),"onUpdate:modelValue":d[1]||(d[1]=v=>W(r)?r.value=v:r=v),title:"Short Break Length:"},null,8,["modelValue"]),w($,{modelValue:S(m),"onUpdate:modelValue":d[2]||(d[2]=v=>W(m)?m.value=v:m=v),title:"Long Break Length:"},null,8,["modelValue"]),w(zt,{color:"primary",label:S(b)},{default:k(()=>[(B(!0),_(ye,null,we(S(i),(v,y)=>(B(),E(We,{key:y,onClick:()=>f(v[0],v[1])},{default:k(()=>[nt((B(),E(Qe,{clickable:""},{default:k(()=>[re(A(u(v[0]))+" ",1),w(ze,null,{default:k(()=>[w(Ne)]),_:1})]),_:2},1024)),[[kt]])]),_:2},1032,["onClick"]))),128))]),_:1},8,["label"]),I("div",Ft,[w(L,{onClick:x},{default:k(()=>[re(" Save ")]),_:1})])]),_:1}))}};export{Zt as default};
